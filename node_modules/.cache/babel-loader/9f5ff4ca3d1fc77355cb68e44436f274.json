{"ast":null,"code":"var _jsxFileName = \"C:\\\\01-starting-setup\\\\src\\\\components\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport { useContext, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport CartContext from \"../store/CartContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Login = () => {\n  _s();\n\n  const ctx = useContext(CartContext);\n  const [error, setError] = useState(false);\n  const navigate = useNavigate();\n  const [userInput, setUserInput] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  const [inputIsTouched, setInputIsTouched] = useState({\n    emailInputIsTouched: false,\n    passwordInputIsTouched: false\n  });\n  const {\n    email,\n    password\n  } = userInput;\n  const {\n    emailInputIsTouched,\n    passwordInputIsTouched\n  } = inputIsTouched;\n  const emailIsValid = email.trim() !== \"\" && email.includes(\"@\");\n  const emailIsInvalid = !emailIsValid && emailInputIsTouched;\n  const passwordIsValid = password.trim() !== \"\" && password.trim().length > 7;\n  const passwordIsInValid = !passwordIsValid && passwordInputIsTouched;\n  let formIsValid = false;\n\n  if (emailIsValid && passwordIsValid) {\n    formIsValid = true;\n  }\n\n  const changeHandler = e => {\n    setUserInput({ ...userInput,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const blurHandler = () => {\n    setInputIsTouched({ ...inputIsTouched,\n      emailInputIsTouched: true\n    });\n  };\n\n  const passwordBlurHandler = () => {\n    setInputIsTouched({ ...inputIsTouched,\n      passwordInputIsTouched: true\n    });\n  };\n\n  const formSubmitHandler = e => {\n    e.preventDefault();\n    setInputIsTouched({\n      emailInputIsTouched: true,\n      passwordInputIsTouched: true\n    });\n\n    if (!emailIsValid || !passwordIsValid) {\n      return;\n    }\n\n    fetch(\"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyA_BUpDBpI2m2GI_dj7h7JDXp8ZHDaIkcY\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        email: email,\n        password: password,\n        returnSecureToken: true\n      })\n    }).then(res => {\n      if (!res.ok) {\n        throw new Error(\"Failed\");\n      } else {\n        ctx.login(userInput);\n        navigate(\"/profile\");\n        return res.json();\n      }\n    }).then(data => console.log(data)).catch(e => {\n      setError(e.message);\n    });\n  };\n\n  const errorCls = emailIsInvalid || passwordIsInValid ? \"form-error\" : \"\";\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-md-auto w-25 mt-lg-5\",\n    style: {\n      backgroundColor: \"#f2f2f2\",\n      padding: \"20px\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"title_form\",\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), !ctx.isLoggedIn && /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: formSubmitHandler,\n      className: errorCls,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3 mt-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email\",\n          className: \"form-label\",\n          children: \"Email:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          id: \"email\",\n          placeholder: \"Enter email\",\n          name: \"email\",\n          value: email,\n          onChange: changeHandler,\n          onBlur: blurHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this), emailIsInvalid && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"input-error\",\n          children: \"Please enter a valid email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"pwd\",\n          className: \"form-label\",\n          children: \"Password:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          className: \"form-control\",\n          id: \"pwd\",\n          placeholder: \"Enter password\",\n          name: \"password\",\n          value: password,\n          onChange: changeHandler,\n          onBlur: passwordBlurHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 13\n        }, this), passwordIsInValid && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"input-error\",\n          children: \"Password length must be greater than 7 characters\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: formIsValid ? \"btn btn-primary\" : \"btn btn-primary disabled\",\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }, this), error && error || /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"input-error\",\n        children: \"User does not exist\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Login, \"UsKIhG9RC+3zN6nKPUPhG705eKE=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useContext","useState","useNavigate","CartContext","Login","ctx","error","setError","navigate","userInput","setUserInput","email","password","inputIsTouched","setInputIsTouched","emailInputIsTouched","passwordInputIsTouched","emailIsValid","trim","includes","emailIsInvalid","passwordIsValid","length","passwordIsInValid","formIsValid","changeHandler","e","target","name","value","blurHandler","passwordBlurHandler","formSubmitHandler","preventDefault","fetch","method","headers","body","JSON","stringify","returnSecureToken","then","res","ok","Error","login","json","data","console","log","catch","message","errorCls","backgroundColor","padding","isLoggedIn"],"sources":["C:/01-starting-setup/src/components/Login.js"],"sourcesContent":["import { useContext, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport CartContext from \"../store/CartContext\";\r\nconst Login = () => {\r\n  const ctx = useContext(CartContext);\r\n  const [error, setError] = useState(false);\r\n  const navigate = useNavigate();\r\n  const [userInput, setUserInput] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n  const [inputIsTouched, setInputIsTouched] = useState({\r\n    emailInputIsTouched: false,\r\n    passwordInputIsTouched: false,\r\n  });\r\n  const { email, password } = userInput;\r\n  const { emailInputIsTouched, passwordInputIsTouched } = inputIsTouched;\r\n  const emailIsValid = email.trim() !== \"\" && email.includes(\"@\");\r\n  const emailIsInvalid = !emailIsValid && emailInputIsTouched;\r\n  const passwordIsValid = password.trim() !== \"\" && password.trim().length > 7;\r\n  const passwordIsInValid = !passwordIsValid && passwordInputIsTouched;\r\n  let formIsValid = false;\r\n  if (emailIsValid && passwordIsValid) {\r\n    formIsValid = true;\r\n  }\r\n  const changeHandler = (e) => {\r\n    setUserInput({\r\n      ...userInput,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n  const blurHandler = () => {\r\n    setInputIsTouched({\r\n      ...inputIsTouched,\r\n      emailInputIsTouched: true,\r\n    });\r\n  };\r\n  const passwordBlurHandler = () => {\r\n    setInputIsTouched({\r\n      ...inputIsTouched,\r\n      passwordInputIsTouched: true,\r\n    });\r\n  };\r\n  const formSubmitHandler = (e) => {\r\n    e.preventDefault();\r\n    setInputIsTouched({\r\n      emailInputIsTouched: true,\r\n      passwordInputIsTouched: true,\r\n    });\r\n    if (!emailIsValid || !passwordIsValid) {\r\n      return;\r\n    }\r\n    fetch(\r\n      \"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyA_BUpDBpI2m2GI_dj7h7JDXp8ZHDaIkcY\",\r\n      {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          email: email,\r\n          password: password,\r\n          returnSecureToken: true,\r\n        }),\r\n      }\r\n    )\r\n      .then((res) => {\r\n        if (!res.ok) {\r\n          throw new Error(\"Failed\");\r\n        } else {\r\n          ctx.login(userInput);\r\n          navigate(\"/profile\");\r\n          return res.json();\r\n        }\r\n      })\r\n      .then((data) => console.log(data))\r\n      .catch((e) => {\r\n        setError(e.message);\r\n      });\r\n  };\r\n  const errorCls = emailIsInvalid || passwordIsInValid ? \"form-error\" : \"\";\r\n  return (\r\n    <div\r\n      className=\"container mt-md-auto w-25 mt-lg-5\"\r\n      style={{ backgroundColor: \"#f2f2f2\", padding: \"20px\" }}\r\n    >\r\n      <h2 className=\"title_form\">Login</h2>\r\n      {!ctx.isLoggedIn && (\r\n        <form onSubmit={formSubmitHandler} className={errorCls}>\r\n          <div className=\"mb-3 mt-3\">\r\n            <label htmlFor=\"email\" className=\"form-label\">\r\n              Email:\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              id=\"email\"\r\n              placeholder=\"Enter email\"\r\n              name=\"email\"\r\n              value={email}\r\n              onChange={changeHandler}\r\n              onBlur={blurHandler}\r\n            />\r\n            {emailIsInvalid && (\r\n              <p className=\"input-error\">Please enter a valid email</p>\r\n            )}\r\n          </div>\r\n          <div className=\"mb-3\">\r\n            <label htmlFor=\"pwd\" className=\"form-label\">\r\n              Password:\r\n            </label>\r\n            <input\r\n              type=\"password\"\r\n              className=\"form-control\"\r\n              id=\"pwd\"\r\n              placeholder=\"Enter password\"\r\n              name=\"password\"\r\n              value={password}\r\n              onChange={changeHandler}\r\n              onBlur={passwordBlurHandler}\r\n            />\r\n            {passwordIsInValid && (\r\n              <p className=\"input-error\">\r\n                Password length must be greater than 7 characters\r\n              </p>\r\n            )}\r\n          </div>\r\n          <button\r\n            type=\"submit\"\r\n            className={\r\n              formIsValid ? \"btn btn-primary\" : \"btn btn-primary disabled\"\r\n            }\r\n          >\r\n            Submit\r\n          </button>\r\n          {(error && error) || (\r\n            <p className=\"input-error\">User does not exist</p>\r\n          )}\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}