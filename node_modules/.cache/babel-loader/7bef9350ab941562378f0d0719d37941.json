{"ast":null,"code":"var _jsxFileName = \"C:\\\\01-starting-setup\\\\src\\\\store\\\\CartProvider.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useReducer } from \"react\";\nimport CartContext from \"./CartContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  items: JSON.parse(localStorage.getItem(\"cart\")) || [],\n  // totalAmount: JSON.parse(localStorage.getItem(\"totalAmount\")) || 0,\n  isLoggedIn: JSON.parse(localStorage.getItem(\"UserLogin\")) || false,\n  user: JSON.parse(localStorage.getItem(\"UserEmail\")) || \"\"\n};\n\nconst reducer = (state, action) => {\n  if (action.type === \"ADD\") {\n    const updatedTotalAmount = state.totalAmount + action.item.price * action.item.amount;\n    const existingItemIndex = state.items.findIndex(item => item.id === action.item.id);\n    const existingCartItem = state.items[existingItemIndex];\n    let updatedItems;\n\n    if (existingCartItem) {\n      const updatedItem = { ...existingCartItem,\n        amount: existingCartItem.amount + action.item.amount,\n        amountSum: (existingCartItem.amount + action.item.amount) * action.item.price\n      };\n      updatedItems = [...state.items];\n      updatedItems[existingItemIndex] = updatedItem;\n    } else {\n      updatedItems = state.items.concat(action.item);\n    }\n\n    return {\n      items: updatedItems,\n      totalAmount: updatedTotalAmount,\n      isLoggedIn: state.isLoggedIn,\n      user: state.user\n    };\n  }\n\n  if (action.type === \"REMOVE\") {\n    const existingItemIndex = state.items.findIndex(item => {\n      return item.id === action.item.id;\n    });\n    const existingCartItem = state.items[existingItemIndex];\n    let updatedItems;\n\n    if (existingCartItem.amount === 1) {\n      updatedItems = state.items.filter(item => {\n        return item.id !== action.item.id;\n      });\n    } else {\n      const updatedItem = { ...existingCartItem,\n        amount: existingCartItem.amount - 1,\n        amountSum: (existingCartItem.amount - action.item.amount) * action.item.price\n      };\n      updatedItems = [...state.items];\n      updatedItems[existingItemIndex] = updatedItem;\n    }\n\n    const updatedTotalAmount = (state.totalAmount - action.item.price) * action.item.amount;\n    return {\n      items: updatedItems,\n      totalAmount: updatedTotalAmount,\n      isLoggedIn: state.isLoggedIn,\n      user: state.user\n    };\n  }\n\n  if (action.type === \"LOGIN\") {\n    state.isLoggedIn = true;\n    let userName = action.user.email;\n    let name = userName.substring(0, userName.indexOf(\"@\"));\n    state.user = name;\n    return {\n      items: state.items,\n      totalAmount: state.totalAmount,\n      isLoggedIn: state.isLoggedIn,\n      user: state.user\n    };\n  }\n\n  if (action.type === \"LOGOUT\") {\n    state.isLoggedIn = false; // state.items = [];\n    // state.totalAmount = 0;\n\n    return {\n      items: state.items,\n      totalAmount: state.totalAmount,\n      isLoggedIn: state.isLoggedIn,\n      user: state.user\n    };\n  }\n\n  if (action.type === \"REMOVE_CARTITEM\") {\n    let updatedItems = state.items.filter(item => {\n      return item.id !== action.item.id;\n    });\n    const updatedTotalAmount = state.totalAmount - action.item.price * action.item.amount;\n    return {\n      items: updatedItems,\n      totalAmount: updatedTotalAmount,\n      isLoggedIn: state.isLoggedIn,\n      user: state.user\n    };\n  }\n\n  return initialState;\n};\n\nconst CartProvider = props => {\n  _s();\n\n  const [state, dispatch] = useReducer(reducer, initialState);\n  useEffect(() => {\n    localStorage.setItem(\"cart\", JSON.stringify(state.items));\n  }, [state.items]); // useEffect(() => {\n  //   localStorage.setItem(\"totalAmount\", JSON.stringify(state.totalAmount));\n  // }, [state.totalAmount]);\n\n  useEffect(() => {\n    localStorage.setItem(\"UserLogin\", JSON.stringify(state.isLoggedIn));\n  }, [state.isLoggedIn]);\n  useEffect(() => {\n    localStorage.setItem(\"UserEmail\", JSON.stringify(state.user));\n  }, [state.user]);\n\n  const addItemHandler = item => {\n    dispatch({\n      type: \"ADD\",\n      item: item\n    });\n  };\n\n  const removeItemHandler = item => {\n    dispatch({\n      type: \"REMOVE\",\n      item: item\n    });\n  };\n\n  const loginHandler = user => {\n    dispatch({\n      type: \"LOGIN\",\n      user: user\n    });\n  };\n\n  const logOutHandler = () => {\n    dispatch({\n      type: \"LOGOUT\"\n    });\n  };\n\n  const cartRemoveItem = item => {\n    dispatch({\n      type: \"REMOVE_CARTITEM\",\n      item: item\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      items: state.items,\n      totalAmount: state.totalAmount,\n      addItem: addItemHandler,\n      removeItem: removeItemHandler,\n      login: loginHandler,\n      logout: logOutHandler,\n      isLoggedIn: state.isLoggedIn,\n      user: state.user,\n      removeCartItem: cartRemoveItem\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 148,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CartProvider, \"s3jE+e7wLGXN/2uWqdAG2uRSMfA=\");\n\n_c = CartProvider;\nexport default CartProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["useEffect","useReducer","CartContext","initialState","items","JSON","parse","localStorage","getItem","isLoggedIn","user","reducer","state","action","type","updatedTotalAmount","totalAmount","item","price","amount","existingItemIndex","findIndex","id","existingCartItem","updatedItems","updatedItem","amountSum","concat","filter","userName","email","name","substring","indexOf","CartProvider","props","dispatch","setItem","stringify","addItemHandler","removeItemHandler","loginHandler","logOutHandler","cartRemoveItem","addItem","removeItem","login","logout","removeCartItem","children"],"sources":["C:/01-starting-setup/src/store/CartProvider.js"],"sourcesContent":["import { useEffect, useReducer } from \"react\";\r\nimport CartContext from \"./CartContext\";\r\nconst initialState = {\r\n  items: JSON.parse(localStorage.getItem(\"cart\")) || [],\r\n  // totalAmount: JSON.parse(localStorage.getItem(\"totalAmount\")) || 0,\r\n  isLoggedIn: JSON.parse(localStorage.getItem(\"UserLogin\")) || false,\r\n  user: JSON.parse(localStorage.getItem(\"UserEmail\")) || \"\",\r\n};\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"ADD\") {\r\n    const updatedTotalAmount =\r\n      state.totalAmount + action.item.price * action.item.amount;\r\n    const existingItemIndex = state.items.findIndex(\r\n      (item) => item.id === action.item.id\r\n    );\r\n    const existingCartItem = state.items[existingItemIndex];\r\n    let updatedItems;\r\n    if (existingCartItem) {\r\n      const updatedItem = {\r\n        ...existingCartItem,\r\n        amount: existingCartItem.amount + action.item.amount,\r\n        amountSum:\r\n          (existingCartItem.amount + action.item.amount) * action.item.price,\r\n      };\r\n      updatedItems = [...state.items];\r\n      updatedItems[existingItemIndex] = updatedItem;\r\n    } else {\r\n      updatedItems = state.items.concat(action.item);\r\n    }\r\n    return {\r\n      items: updatedItems,\r\n      totalAmount: updatedTotalAmount,\r\n      isLoggedIn: state.isLoggedIn,\r\n      user: state.user,\r\n    };\r\n  }\r\n  if (action.type === \"REMOVE\") {\r\n    const existingItemIndex = state.items.findIndex((item) => {\r\n      return item.id === action.item.id;\r\n    });\r\n    const existingCartItem = state.items[existingItemIndex];\r\n    let updatedItems;\r\n    if (existingCartItem.amount === 1) {\r\n      updatedItems = state.items.filter((item) => {\r\n        return item.id !== action.item.id;\r\n      });\r\n    } else {\r\n      const updatedItem = {\r\n        ...existingCartItem,\r\n        amount: existingCartItem.amount - 1,\r\n        amountSum:\r\n          (existingCartItem.amount - action.item.amount) * action.item.price,\r\n      };\r\n      updatedItems = [...state.items];\r\n      updatedItems[existingItemIndex] = updatedItem;\r\n    }\r\n    const updatedTotalAmount =\r\n      (state.totalAmount - action.item.price) * action.item.amount;\r\n    return {\r\n      items: updatedItems,\r\n      totalAmount: updatedTotalAmount,\r\n      isLoggedIn: state.isLoggedIn,\r\n      user: state.user,\r\n    };\r\n  }\r\n  if (action.type === \"LOGIN\") {\r\n    state.isLoggedIn = true;\r\n    let userName = action.user.email;\r\n    let name = userName.substring(0, userName.indexOf(\"@\"));\r\n    state.user = name;\r\n    return {\r\n      items: state.items,\r\n      totalAmount: state.totalAmount,\r\n      isLoggedIn: state.isLoggedIn,\r\n      user: state.user,\r\n    };\r\n  }\r\n  if (action.type === \"LOGOUT\") {\r\n    state.isLoggedIn = false;\r\n    // state.items = [];\r\n    // state.totalAmount = 0;\r\n    return {\r\n      items: state.items,\r\n      totalAmount: state.totalAmount,\r\n      isLoggedIn: state.isLoggedIn,\r\n      user: state.user,\r\n    };\r\n  }\r\n  if (action.type === \"REMOVE_CARTITEM\") {\r\n    let updatedItems = state.items.filter((item) => {\r\n      return item.id !== action.item.id;\r\n    });\r\n    const updatedTotalAmount =\r\n      state.totalAmount - action.item.price * action.item.amount;\r\n    return {\r\n      items: updatedItems,\r\n      totalAmount: updatedTotalAmount,\r\n      isLoggedIn: state.isLoggedIn,\r\n      user: state.user,\r\n    };\r\n  }\r\n  return initialState;\r\n};\r\nconst CartProvider = (props) => {\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n  useEffect(() => {\r\n    localStorage.setItem(\"cart\", JSON.stringify(state.items));\r\n  }, [state.items]);\r\n  // useEffect(() => {\r\n  //   localStorage.setItem(\"totalAmount\", JSON.stringify(state.totalAmount));\r\n  // }, [state.totalAmount]);\r\n  useEffect(() => {\r\n    localStorage.setItem(\"UserLogin\", JSON.stringify(state.isLoggedIn));\r\n  }, [state.isLoggedIn]);\r\n  useEffect(() => {\r\n    localStorage.setItem(\"UserEmail\", JSON.stringify(state.user));\r\n  }, [state.user]);\r\n  const addItemHandler = (item) => {\r\n    dispatch({\r\n      type: \"ADD\",\r\n      item: item,\r\n    });\r\n  };\r\n  const removeItemHandler = (item) => {\r\n    dispatch({\r\n      type: \"REMOVE\",\r\n      item: item,\r\n    });\r\n  };\r\n  const loginHandler = (user) => {\r\n    dispatch({\r\n      type: \"LOGIN\",\r\n      user: user,\r\n    });\r\n  };\r\n  const logOutHandler = () => {\r\n    dispatch({\r\n      type: \"LOGOUT\",\r\n    });\r\n  };\r\n  const cartRemoveItem = (item) => {\r\n    dispatch({\r\n      type: \"REMOVE_CARTITEM\",\r\n      item: item,\r\n    });\r\n  };\r\n  return (\r\n    <CartContext.Provider\r\n      value={{\r\n        items: state.items,\r\n        totalAmount: state.totalAmount,\r\n        addItem: addItemHandler,\r\n        removeItem: removeItemHandler,\r\n        login: loginHandler,\r\n        logout: logOutHandler,\r\n        isLoggedIn: state.isLoggedIn,\r\n        user: state.user,\r\n        removeCartItem: cartRemoveItem,\r\n      }}\r\n    >\r\n      {props.children}\r\n    </CartContext.Provider>\r\n  );\r\n};\r\nexport default CartProvider;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}