{"ast":null,"code":"var _jsxFileName = \"C:\\\\01-starting-setup\\\\src\\\\store\\\\CartProvider.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useReducer } from \"react\";\nimport CartContext from \"./CartContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  items: JSON.parse(localStorage.getItem(\"cart\")) || [],\n  totalAmount: JSON.parse(localStorage.getItem(\"totalAmount\")) || 0,\n  isLoggedIn: JSON.parse(localStorage.getItem(\"UserLogin\")) || false,\n  user: JSON.parse(localStorage.getItem(\"User\")) || \"\"\n};\n\nconst reducer = (state, action) => {\n  if (action.type === \"ADD\") {\n    const updatedTotalAmount = state.totalAmount + action.item.price * action.item.amount;\n    const existingItemIndex = state.items.findIndex(item => item.id === action.item.id);\n    const existingCartItem = state.items[existingItemIndex];\n    let updatedItems;\n\n    if (existingCartItem) {\n      const updatedItem = { ...existingCartItem,\n        amount: existingCartItem.amount + action.item.amount,\n        amountSum: (existingCartItem.amount + action.item.amount) * action.item.price\n      };\n      updatedItems = [...state.items];\n      updatedItems[existingItemIndex] = updatedItem;\n    } else {\n      updatedItems = state.items.concat(action.item);\n    }\n\n    return {\n      items: updatedItems,\n      totalAmount: updatedTotalAmount,\n      isLoggedIn: state.isLoggedIn,\n      user: state.user\n    };\n  }\n\n  if (action.type === \"REMOVE\") {\n    const existingItemIndex = state.items.findIndex(item => {\n      return item.id === action.item.id;\n    });\n    const existingCartItem = state.items[existingItemIndex];\n    let updatedItems;\n\n    if (existingCartItem.amount === 1) {\n      updatedItems = state.items.filter(item => {\n        return item.id !== action.item.id;\n      });\n    } else {\n      const updatedItem = { ...existingCartItem,\n        amount: existingCartItem.amount - 1,\n        amountSum: (existingCartItem.amount - action.item.amount) * action.item.price\n      };\n      updatedItems = [...state.items];\n      updatedItems[existingItemIndex] = updatedItem;\n    }\n\n    const updatedTotalAmount = (state.totalAmount - action.item.price) * action.item.amount;\n    return {\n      items: updatedItems,\n      totalAmount: updatedTotalAmount,\n      isLoggedIn: state.isLoggedIn,\n      user: state.user\n    };\n  }\n\n  if (action.type === \"LOGIN\") {\n    state.isLoggedIn = true;\n    state.user = action.user.email;\n    return {\n      items: state.items,\n      totalAmount: state.totalAmount,\n      isLoggedIn: state.isLoggedIn,\n      user: state.user\n    };\n  }\n\n  if (action.type === \"LOGOUT\") {\n    state.isLoggedIn = false; // state.items = [];\n    // state.totalAmount = 0;\n\n    return {\n      items: state.items,\n      totalAmount: state.totalAmount,\n      isLoggedIn: state.isLoggedIn,\n      user: state.user\n    };\n  }\n\n  return initialState;\n};\n\nconst CartProvider = props => {\n  _s();\n\n  const [state, dispatch] = useReducer(reducer, initialState);\n  useEffect(() => {\n    localStorage.setItem(\"cart\", JSON.stringify(state.items));\n  }, [state.items]);\n  useEffect(() => {\n    localStorage.setItem(\"totalAmount\", JSON.stringify(state.totalAmount));\n  }, [state.totalAmount]);\n  useEffect(() => {\n    localStorage.setItem(\"UserLogin\", JSON.stringify(state.isLoggedIn));\n  }, [state.isLoggedIn]);\n  useEffect(() => {\n    localStorage.setItem(\"User\", JSON.stringify(state.user.email));\n  }, [state.user]);\n\n  const addItemHandler = item => {\n    dispatch({\n      type: \"ADD\",\n      item: item\n    });\n  };\n\n  const removeItemHandler = item => {\n    dispatch({\n      type: \"REMOVE\",\n      item: item\n    });\n  };\n\n  const loginHandler = user => {\n    dispatch({\n      type: \"LOGIN\",\n      user: user\n    });\n  };\n\n  const logOutHandler = () => {\n    dispatch({\n      type: \"LOGOUT\"\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      items: state.items,\n      totalAmount: state.totalAmount,\n      addItem: addItemHandler,\n      removeItem: removeItemHandler,\n      login: loginHandler,\n      logout: logOutHandler,\n      isLoggedIn: state.isLoggedIn,\n      user: state.user\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 127,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CartProvider, \"4iRlf1j8yd8EOnLzdn/Ri/p3tw0=\");\n\n_c = CartProvider;\nexport default CartProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["useEffect","useReducer","CartContext","initialState","items","JSON","parse","localStorage","getItem","totalAmount","isLoggedIn","user","reducer","state","action","type","updatedTotalAmount","item","price","amount","existingItemIndex","findIndex","id","existingCartItem","updatedItems","updatedItem","amountSum","concat","filter","email","CartProvider","props","dispatch","setItem","stringify","addItemHandler","removeItemHandler","loginHandler","logOutHandler","addItem","removeItem","login","logout","children"],"sources":["C:/01-starting-setup/src/store/CartProvider.js"],"sourcesContent":["import { useEffect, useReducer } from \"react\";\r\nimport CartContext from \"./CartContext\";\r\nconst initialState = {\r\n  items: JSON.parse(localStorage.getItem(\"cart\")) || [],\r\n  totalAmount: JSON.parse(localStorage.getItem(\"totalAmount\")) || 0,\r\n  isLoggedIn: JSON.parse(localStorage.getItem(\"UserLogin\")) || false,\r\n  user: JSON.parse(localStorage.getItem(\"User\")) || \"\",\r\n};\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"ADD\") {\r\n    const updatedTotalAmount =\r\n      state.totalAmount + action.item.price * action.item.amount;\r\n    const existingItemIndex = state.items.findIndex(\r\n      (item) => item.id === action.item.id\r\n    );\r\n    const existingCartItem = state.items[existingItemIndex];\r\n    let updatedItems;\r\n    if (existingCartItem) {\r\n      const updatedItem = {\r\n        ...existingCartItem,\r\n        amount: existingCartItem.amount + action.item.amount,\r\n        amountSum:\r\n          (existingCartItem.amount + action.item.amount) * action.item.price,\r\n      };\r\n      updatedItems = [...state.items];\r\n      updatedItems[existingItemIndex] = updatedItem;\r\n    } else {\r\n      updatedItems = state.items.concat(action.item);\r\n    }\r\n    return {\r\n      items: updatedItems,\r\n      totalAmount: updatedTotalAmount,\r\n      isLoggedIn: state.isLoggedIn,\r\n      user: state.user,\r\n    };\r\n  }\r\n  if (action.type === \"REMOVE\") {\r\n    const existingItemIndex = state.items.findIndex((item) => {\r\n      return item.id === action.item.id;\r\n    });\r\n    const existingCartItem = state.items[existingItemIndex];\r\n    let updatedItems;\r\n    if (existingCartItem.amount === 1) {\r\n      updatedItems = state.items.filter((item) => {\r\n        return item.id !== action.item.id;\r\n      });\r\n    } else {\r\n      const updatedItem = {\r\n        ...existingCartItem,\r\n        amount: existingCartItem.amount - 1,\r\n        amountSum:\r\n          (existingCartItem.amount - action.item.amount) * action.item.price,\r\n      };\r\n      updatedItems = [...state.items];\r\n      updatedItems[existingItemIndex] = updatedItem;\r\n    }\r\n    const updatedTotalAmount =\r\n      (state.totalAmount - action.item.price) * action.item.amount;\r\n    return {\r\n      items: updatedItems,\r\n      totalAmount: updatedTotalAmount,\r\n      isLoggedIn: state.isLoggedIn,\r\n      user: state.user,\r\n    };\r\n  }\r\n  if (action.type === \"LOGIN\") {\r\n    state.isLoggedIn = true;\r\n    state.user = action.user.email;\r\n    return {\r\n      items: state.items,\r\n      totalAmount: state.totalAmount,\r\n      isLoggedIn: state.isLoggedIn,\r\n      user: state.user,\r\n    };\r\n  }\r\n  if (action.type === \"LOGOUT\") {\r\n    state.isLoggedIn = false;\r\n    // state.items = [];\r\n    // state.totalAmount = 0;\r\n    return {\r\n      items: state.items,\r\n      totalAmount: state.totalAmount,\r\n      isLoggedIn: state.isLoggedIn,\r\n      user: state.user,\r\n    };\r\n  }\r\n  return initialState;\r\n};\r\nconst CartProvider = (props) => {\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n  useEffect(() => {\r\n    localStorage.setItem(\"cart\", JSON.stringify(state.items));\r\n  }, [state.items]);\r\n  useEffect(() => {\r\n    localStorage.setItem(\"totalAmount\", JSON.stringify(state.totalAmount));\r\n  }, [state.totalAmount]);\r\n  useEffect(() => {\r\n    localStorage.setItem(\"UserLogin\", JSON.stringify(state.isLoggedIn));\r\n  }, [state.isLoggedIn]);\r\n  useEffect(() => {\r\n    localStorage.setItem(\"User\", JSON.stringify(state.user.email));\r\n  }, [state.user]);\r\n  const addItemHandler = (item) => {\r\n    dispatch({\r\n      type: \"ADD\",\r\n      item: item,\r\n    });\r\n  };\r\n  const removeItemHandler = (item) => {\r\n    dispatch({\r\n      type: \"REMOVE\",\r\n      item: item,\r\n    });\r\n  };\r\n  const loginHandler = (user) => {\r\n    dispatch({\r\n      type: \"LOGIN\",\r\n      user: user,\r\n    });\r\n  };\r\n  const logOutHandler = () => {\r\n    dispatch({\r\n      type: \"LOGOUT\",\r\n    });\r\n  };\r\n  return (\r\n    <CartContext.Provider\r\n      value={{\r\n        items: state.items,\r\n        totalAmount: state.totalAmount,\r\n        addItem: addItemHandler,\r\n        removeItem: removeItemHandler,\r\n        login: loginHandler,\r\n        logout: logOutHandler,\r\n        isLoggedIn: state.isLoggedIn,\r\n        user: state.user,\r\n      }}\r\n    >\r\n      {props.children}\r\n    </CartContext.Provider>\r\n  );\r\n};\r\nexport default CartProvider;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}