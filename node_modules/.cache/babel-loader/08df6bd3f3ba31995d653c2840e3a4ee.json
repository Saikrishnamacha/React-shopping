{"ast":null,"code":"var _jsxFileName = \"C:\\\\01-starting-setup\\\\src\\\\store\\\\CartProvider.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useReducer } from \"react\";\nimport CartContext from \"./CartContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  // items: JSON.parse(localStorage.getItem(\"cart\")) || \"[]\",\n  items: [],\n  totalAmount: 0\n};\n\nconst reducer = (state, action) => {\n  if (action.type === \"ADD\") {\n    const updatedTotalAmount = state.totalAmount + action.item.price * action.item.amount;\n    const existingItemIndex = state.items.findIndex(item => item.id === action.item.id);\n    const existingCartItem = state.items[existingItemIndex];\n    let updatedItems;\n\n    if (existingCartItem) {\n      const updatedItem = { ...existingCartItem,\n        amount: existingCartItem.amount + action.item.amount,\n        amountSum: (existingCartItem.amount + action.item.amount) * action.item.price\n      };\n      updatedItems = [...state.items];\n      updatedItems[existingItemIndex] = updatedItem;\n    } else {\n      updatedItems = state.items.concat(action.item);\n    }\n\n    return {\n      items: updatedItems,\n      totalAmount: updatedTotalAmount\n    };\n  }\n\n  if (action.type === \"REMOVE\") {\n    const existingItemIndex = state.items.findIndex(item => {\n      return item.id === action.item.id;\n    });\n    const existingCartItem = state.items[existingItemIndex];\n    let updatedItems;\n\n    if (existingCartItem.amount === 1) {\n      updatedItems = state.items.filter(item => {\n        return item.id !== action.item.id;\n      });\n    } else {\n      const updatedItem = { ...existingCartItem,\n        amount: existingCartItem.amount - 1,\n        amountSum: (existingCartItem.amount - action.item.amount) * action.item.price\n      };\n      updatedItems = [...state.items];\n      updatedItems[existingItemIndex] = updatedItem;\n    }\n\n    const updatedTotalAmount = (state.totalAmount - action.item.price) * action.item.amount;\n    return {\n      items: updatedItems,\n      totalAmount: updatedTotalAmount\n    };\n  }\n\n  return initialState;\n};\n\nconst CartProvider = props => {\n  _s();\n\n  const [state, dispatch] = useReducer(reducer, initialState);\n  useEffect(() => {\n    localStorage.setItem(\"cart\", JSON.stringify(state.items));\n  }, [state.items]);\n\n  const addItemHandler = item => {\n    dispatch({\n      type: \"ADD\",\n      item: item\n    });\n  };\n\n  const removeItemHandler = item => {\n    dispatch({\n      type: \"REMOVE\",\n      item: item\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      items: state.items,\n      totalAmount: state.totalAmount,\n      addItem: addItemHandler,\n      removeItem: removeItemHandler\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CartProvider, \"bgCdjuTOmPdSBRwTap80EFd9Y3U=\");\n\n_c = CartProvider;\nexport default CartProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["useEffect","useReducer","CartContext","initialState","items","totalAmount","reducer","state","action","type","updatedTotalAmount","item","price","amount","existingItemIndex","findIndex","id","existingCartItem","updatedItems","updatedItem","amountSum","concat","filter","CartProvider","props","dispatch","localStorage","setItem","JSON","stringify","addItemHandler","removeItemHandler","addItem","removeItem","children"],"sources":["C:/01-starting-setup/src/store/CartProvider.js"],"sourcesContent":["import { useEffect, useReducer } from \"react\";\r\nimport CartContext from \"./CartContext\";\r\nconst initialState = {\r\n  // items: JSON.parse(localStorage.getItem(\"cart\")) || \"[]\",\r\n  items: [],\r\n  totalAmount: 0,\r\n};\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"ADD\") {\r\n    const updatedTotalAmount =\r\n      state.totalAmount + action.item.price * action.item.amount;\r\n    const existingItemIndex = state.items.findIndex(\r\n      (item) => item.id === action.item.id\r\n    );\r\n    const existingCartItem = state.items[existingItemIndex];\r\n    let updatedItems;\r\n    if (existingCartItem) {\r\n      const updatedItem = {\r\n        ...existingCartItem,\r\n        amount: existingCartItem.amount + action.item.amount,\r\n        amountSum:\r\n          (existingCartItem.amount + action.item.amount) * action.item.price,\r\n      };\r\n      updatedItems = [...state.items];\r\n      updatedItems[existingItemIndex] = updatedItem;\r\n    } else {\r\n      updatedItems = state.items.concat(action.item);\r\n    }\r\n    return {\r\n      items: updatedItems,\r\n      totalAmount: updatedTotalAmount,\r\n    };\r\n  }\r\n  if (action.type === \"REMOVE\") {\r\n    const existingItemIndex = state.items.findIndex((item) => {\r\n      return item.id === action.item.id;\r\n    });\r\n    const existingCartItem = state.items[existingItemIndex];\r\n    let updatedItems;\r\n    if (existingCartItem.amount === 1) {\r\n      updatedItems = state.items.filter((item) => {\r\n        return item.id !== action.item.id;\r\n      });\r\n    } else {\r\n      const updatedItem = {\r\n        ...existingCartItem,\r\n        amount: existingCartItem.amount - 1,\r\n        amountSum:\r\n          (existingCartItem.amount - action.item.amount) * action.item.price,\r\n      };\r\n      updatedItems = [...state.items];\r\n      updatedItems[existingItemIndex] = updatedItem;\r\n    }\r\n    const updatedTotalAmount =\r\n      (state.totalAmount - action.item.price) * action.item.amount;\r\n    return {\r\n      items: updatedItems,\r\n      totalAmount: updatedTotalAmount,\r\n    };\r\n  }\r\n  return initialState;\r\n};\r\nconst CartProvider = (props) => {\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n  useEffect(() => {\r\n    localStorage.setItem(\"cart\", JSON.stringify(state.items));\r\n  }, [state.items]);\r\n  const addItemHandler = (item) => {\r\n    dispatch({\r\n      type: \"ADD\",\r\n      item: item,\r\n    });\r\n  };\r\n  const removeItemHandler = (item) => {\r\n    dispatch({\r\n      type: \"REMOVE\",\r\n      item: item,\r\n    });\r\n  };\r\n  return (\r\n    <CartContext.Provider\r\n      value={{\r\n        items: state.items,\r\n        totalAmount: state.totalAmount,\r\n        addItem: addItemHandler,\r\n        removeItem: removeItemHandler,\r\n      }}\r\n    >\r\n      {props.children}\r\n    </CartContext.Provider>\r\n  );\r\n};\r\nexport default CartProvider;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}